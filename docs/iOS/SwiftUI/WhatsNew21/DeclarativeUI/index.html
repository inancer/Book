<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-iOS/SwiftUI/WhatsNew21/DeclarativeUI">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/Book/blog/rss.xml" title="The Book RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Book/blog/atom.xml" title="The Book Atom Feed"><title data-rh="true">Declarative UI | The Book</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://inancer.github.io//Book/docs/iOS/SwiftUI/WhatsNew21/DeclarativeUI"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Declarative UI | The Book"><meta data-rh="true" name="description" content="1. Identity"><meta data-rh="true" property="og:description" content="1. Identity"><link data-rh="true" rel="icon" href="/Book/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://inancer.github.io//Book/docs/iOS/SwiftUI/WhatsNew21/DeclarativeUI"><link data-rh="true" rel="alternate" href="https://inancer.github.io//Book/docs/iOS/SwiftUI/WhatsNew21/DeclarativeUI" hreflang="en"><link data-rh="true" rel="alternate" href="https://inancer.github.io//Book/docs/iOS/SwiftUI/WhatsNew21/DeclarativeUI" hreflang="x-default"><link rel="stylesheet" href="/Book/assets/css/styles.51e9f5d8.css">
<link rel="preload" href="/Book/assets/js/runtime~main.84817786.js" as="script">
<link rel="preload" href="/Book/assets/js/main.ee0da43f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Book/"><div class="navbar__logo"><img src="/Book/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/Book/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">The Book</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Book/docs/intro">iOS</a><a class="navbar__item navbar__link" href="/Book/docs/intro_android">Android</a><a class="navbar__item navbar__link" href="/Book/docs/intro_general">General</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Book/docs/intro_english">English</a><a class="navbar__item navbar__link" href="/Book/blog">Blog</a><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Book/docs/intro">Summary</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/Book/docs/category/swift">Swift</a><button aria-label="Toggle the collapsible sidebar category &#x27;Swift&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Book/docs/iOS/Concurrency/Modern Concurrency Book/Untitled">Concurrency</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Book/docs/iOS/RxSwift/Introduction">RxSwift</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/Book/docs/iOS/SwiftUI/Introduction">SwiftUI</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Book/docs/iOS/SwiftUI/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/Book/docs/iOS/SwiftUI/WhatsNew21/DeclarativeUI">WhatsNew21</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Book/docs/iOS/SwiftUI/WhatsNew21/DeclarativeUI">Declarative UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Book/docs/iOS/SwiftUI/WhatsNew21/Summary">What&#x27;s New in SwiftUI WWDC2021</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Book/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SwiftUI</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">WhatsNew21</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Declarative UI</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Declarative UI</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="1-identity">1. Identity<a class="hash-link" href="#1-identity" title="Direct link to heading">​</a></h2><p>It&#x27;s also a critical aspect of how SwiftUI understands your app. </p><p>Views that share the same identity represent different states of the same conceptual UI element.</p><p>Same identity = Same element</p><p>in contrast;</p><p>different identities = distinct elements</p><blockquote><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">Every View has an **identity** even if not explicit identity</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><h3 class="anchor anchorWithStickyNavbar_mojV" id="types-of-identity">Types of identity<a class="hash-link" href="#types-of-identity" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="1-explicit-identity">1. Explicit identity<a class="hash-link" href="#1-explicit-identity" title="Direct link to heading">​</a></h4><p>Using custom or data-driven identifiers.
<img loading="lazy" alt="Explicit" src="/Book/assets/images/ExplicitIdentity-459951c86146667b1a0711bb13783078.png" width="1608" height="779" class="img_E7b_"></p><p>Assigning names or identifiers like this is a form of explicit identity.
Explicit identity is powerful and flexible, but does require that someone, somewhere keeps track of all those names.</p><p><img loading="lazy" alt="PointerIdentity" src="/Book/assets/images/PointerIdentity-e7f76d05e8c07867f180f2809984c6ab.png" width="1603" height="920" class="img_E7b_"></p><blockquote><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">The pointer is a natural source of explicit identity.</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><p><img loading="lazy" alt="SwiftUIIdentity" src="/Book/assets/images/SwiftUIIdentity-7ec51ea37234ef061eca6a5120756ca4.png" width="1299" height="931" class="img_E7b_"></p><p>But SwiftUI doesn&#x27;t use pointers because SwiftUI views are value types, commonly represented as structs instead of classes.</p><ul><li>Not allocated, no pointers</li><li>Efficient memory representation</li><li>Supports small, single-purpose components</li></ul><p>TMI:  <code>SwiftUI essentials WWDC19</code></p><p>Example for ScrollViewReader with identity; </p><div class="language-swift codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-swift codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token class-name">ScrollViewReader</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> proxy </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ScrollView</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">HeaderView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rescueDog</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">headerID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rescueDog</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">backstory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Button</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-literal string" style="color:#e3116c">&quot;Jump to Top&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            withAnimation</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                proxy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">scrollTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">headerID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="2-structural-identity">2. Structural identity<a class="hash-link" href="#2-structural-identity" title="Direct link to heading">​</a></h4><p>Distinguishing views by their type and position in the view hierarchy.</p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506180405-23b60216772296bc2ac55a0d52deeaf0.png" width="1647" height="866" class="img_E7b_"></p><p>When SwiftUI looks at your views, it sees their generic types -- in this case, our if statement translated into a _ConditionalContent view, which is generic over its true and false content.</p><p>This translation is powered by a ViewBuilder, which is a type of result builder in Swift.</p><p>The View protocol implicitly wraps its body property in a ViewBuilder, which constructs a single generic view from the logic statements in our property.</p><p>The some View return type of our body property is a placeholder that represents this static composite type, hiding it away so it doesn&#x27;t clutter up our code.</p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506181416-13027f0a50ea7d1ac2aa504b92d1ce2c.png" width="1740" height="471" class="img_E7b_"></p><p>Using this generic type, SwiftUI can guarantee that the true view will always be the AdoptionDirectory, while the False view will always be the DogList, allowing them to be assigned an implicit, stable identity behind the scenes.</p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506181519-06b125f83c85a95be75f15254a3f6193.png" width="889" height="329" class="img_E7b_"></p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506181659-55bdfc54bb3acef9d33b64a6c73b2a77.png" width="1718" height="998" class="img_E7b_"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="using-anyview">Using AnyView<a class="hash-link" href="#using-anyview" title="Direct link to heading">​</a></h5><p>Each conditional branch in the function returns a different kind of view, so I&#x27;ve wrapped them all in AnyViews because Swift requires a single return type for the whole function.</p><p>Unfortunately, this also means that SwiftUI can&#x27;t see the conditional structure of my code.</p><p>Instead, it just sees an AnyView as a return type of the function.</p><p>This is because AnyView is what&#x27;s called a &quot;type-erasing wrapper type&quot; -- it hides the type of the view it is wrapping from its generic signature.</p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506182653-3a00e895ade13a087332d698bec70972.png" width="3372" height="1922" class="img_E7b_"></p><p>To create helper func which is return view, function should return single type of object. To more information <a href="https://developer.apple.com/wwdc21/10022" target="_blank" rel="noopener noreferrer">please check the link at time 14:00 </a></p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506182153-dcf9de4554e730499ac9862bbd296b15.png" width="1806" height="911" class="img_E7b_"></p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506183316-d87a75cf88bc5b450609d5e501103256.png" width="1780" height="942" class="img_E7b_"></p><p>Using AnyView; </p><blockquote><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">In general, we recommend avoiding AnyViews whenever possible. And because AnyView hides static type information from the compiler, it can sometimes prevent helpful diagnostic errors and warnings from being surfaced in your code.</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><ul><li>Makes code harder to understand</li><li>Fewer compile-time diagnostics</li><li>Worse performance when not needed</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="2-lifetime">2. Lifetime<a class="hash-link" href="#2-lifetime" title="Direct link to heading">​</a></h2><p>View Value != View Identity</p><p>Same view but different identity.</p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506190125-12312635685141feef61aea6b1b3d4fe.png" width="1827" height="770" class="img_E7b_"></p><p>When we first evaluate body and we enter the true branch, SwiftUI will allocate persistent storage for the state with its initial value.</p><p>Throughout the lifetime of this view, SwiftUI persists the state as it gets mutated by various actions.</p><p>But what happens if the value of dayTime changes and we enter the false branch? SwiftUI knows this is a different view with a distinct identity.</p><p>It creates new storage for the false view, starting with the state&#x27;s initial value, and the storage for the true view is deallocated right after.</p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506190638-449d558d68aae6531e141b9af46add33.png" width="1391" height="836" class="img_E7b_"></p><p>But what if we go back to the true branch? Well, that&#x27;s a new view again, so SwiftUI creates new storage, starting again from the state&#x27;s initial value.</p><blockquote><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">State lifetime = View lifetime</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><h5 class="anchor anchorWithStickyNavbar_mojV" id="examples-with-foreach">Examples with foreach<a class="hash-link" href="#examples-with-foreach" title="Direct link to heading">​</a></h5><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506190953-f07bc0d6ae8a3dbf302db9b3adfe7f07.png" width="1828" height="1035" class="img_E7b_"></p><p><img loading="lazy" src="/Book/assets/images/Pasted image 20220506191258-5a08e1801169282649e4a33cde5aaed1.png" width="1801" height="1017" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="3-dependencies">3. Dependencies<a class="hash-link" href="#3-dependencies" title="Direct link to heading">​</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/iOS/SwiftUI/WhatsNew21/DeclarativeUI.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Book/docs/iOS/SwiftUI/Introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Book/docs/iOS/SwiftUI/WhatsNew21/Summary"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">What&#x27;s New in SwiftUI WWDC2021</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-identity" class="table-of-contents__link toc-highlight">1. Identity</a><ul><li><a href="#types-of-identity" class="table-of-contents__link toc-highlight">Types of identity</a></li></ul></li><li><a href="#2-lifetime" class="table-of-contents__link toc-highlight">2. Lifetime</a></li><li><a href="#3-dependencies" class="table-of-contents__link toc-highlight">3. Dependencies</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Book/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Book/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Book/assets/js/runtime~main.84817786.js"></script>
<script src="/Book/assets/js/main.ee0da43f.js"></script>
</body>
</html>